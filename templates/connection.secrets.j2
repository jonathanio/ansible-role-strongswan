# {{ ansible_managed }}
{% if item.0.conn['also'] is not defined %}
{% set authby = item.0.conn.authby if item.0.conn.authby is defined else strongswan_conn_default.authby %}
# conn {{ item.0.name }} ({{ item.0.left.address }} <-> {{ item.0.right.address }})
{% if authby == 'psk' or authby == 'secret' %}
{%   if item.0.conn.keyexchange|lower == 'ikev1' %}
{{ item.0.left.address }} {{ item.0.right.address }} : PSK "{{ item.0.secret }}"
{%   else %}
{{ item.0.left.id }} {{ item.0.right.id }} : PSK {{ item.0.secret }}
{%   endif %}
{% elif authby == 'rsasig' or authby == 'ecdsasig' %}
{{ item.0.left.id }} {{ item.0.right.id }} : {{ item.0.secret }}
{% endif %}
{% else %}
# conn {{ item.0.name }}
{% endif %}
